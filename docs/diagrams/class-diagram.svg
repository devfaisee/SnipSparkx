<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="800" font-family="'Segoe UI', Tahoma, sans-serif">
  <defs>
    <style>
      .title { font-size: 26px; font-weight: 700; fill: #1e293b; }
      .subtitle { font-size: 14px; fill: #64748b; }
      .section-header { font-size: 13px; font-weight: 600; fill: #475569; letter-spacing: 0.5px; text-transform: uppercase; }
      .class-box { fill: #ffffff; stroke: #3b82f6; stroke-width: 2.5; rx: 12; filter: drop-shadow(0px 4px 6px rgba(0,0,0,0.1)); }
      .class-name { font-size: 17px; font-weight: 700; fill: #1e293b; }
      .class-divider { stroke: #e2e8f0; stroke-width: 1.5; }
      .class-attr { font-size: 13px; fill: #475569; }
      .class-method { font-size: 13px; fill: #0f172a; }
      .connector { stroke: #64748b; stroke-width: 2.5; fill: none; marker-end: url(#arrow); }
      .connector-label { font-size: 12px; fill: #64748b; font-weight: 500; }
    </style>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="11" refY="6" orient="auto">
      <path d="M 0 0 L 12 6 L 0 12 L 3 6 Z" fill="#64748b" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="700" y="50" text-anchor="middle" class="title">SnipSparkx System Architecture</text>
  <text x="700" y="75" text-anchor="middle" class="subtitle">Complete class diagram showing frontend and backend components</text>

  <!-- Frontend Section -->
  <text x="100" y="130" class="section-header">Frontend Layer (Browser)</text>
  
  <!-- Snippet Class -->
  <g transform="translate(80, 150)">
    <rect class="class-box" width="320" height="240"/>
    <text x="160" y="32" text-anchor="middle" class="class-name">Snippet</text>
    <line x1="10" y1="45" x2="310" y2="45" class="class-divider"/>
    <text x="20" y="70" class="class-attr">- id: string</text>
    <text x="20" y="92" class="class-attr">- title: string</text>
    <text x="20" y="114" class="class-attr">- description: string</text>
    <text x="20" y="136" class="class-attr">- code: string (CSS)</text>
    <text x="20" y="158" class="class-attr">- html: string</text>
    <line x1="10" y1="172" x2="310" y2="172" class="class-divider"/>
    <text x="20" y="196" class="class-method">+ getSrcDoc(): string</text>
    <text x="20" y="218" class="class-method">+ renderCard(callback): HTMLElement</text>
  </g>

  <!-- SnippetManager Class -->
  <g transform="translate(480, 150)">
    <rect class="class-box" width="380" height="260"/>
    <text x="190" y="32" text-anchor="middle" class="class-name">SnippetManager</text>
    <line x1="10" y1="45" x2="370" y2="45" class="class-divider"/>
    <text x="20" y="70" class="class-attr">- container: HTMLElement</text>
    <text x="20" y="92" class="class-attr">- modal: HTMLElement</text>
    <text x="20" y="114" class="class-attr">- searchInput: HTMLInputElement</text>
    <line x1="10" y1="128" x2="370" y2="128" class="class-divider"/>
    <text x="20" y="152" class="class-method">+ init(): void</text>
    <text x="20" y="174" class="class-method">+ fetchSnippets(): Promise&lt;Snippet[]&gt;</text>
    <text x="20" y="196" class="class-method">+ renderSnippets(snippets): void</text>
    <text x="20" y="218" class="class-method">+ openModal(snippet): void</text>
    <text x="20" y="240" class="class-method">+ closeModal(): void</text>
  </g>

  <!-- AdminDashboard Class -->
  <g transform="translate(940, 150)">
    <rect class="class-box" width="380" height="280"/>
    <text x="190" y="32" text-anchor="middle" class="class-name">AdminDashboard</text>
    <line x1="10" y1="45" x2="370" y2="45" class="class-divider"/>
    <text x="20" y="70" class="class-attr">- tokenKey: string = 'snip_admin_token'</text>
    <text x="20" y="92" class="class-attr">- currentSnippets: Snippet[]</text>
    <line x1="10" y1="106" x2="370" y2="106" class="class-divider"/>
    <text x="20" y="130" class="class-method">+ checkAuth(): boolean</text>
    <text x="20" y="152" class="class-method">+ fetchSnippets(): Promise&lt;Snippet[]&gt;</text>
    <text x="20" y="174" class="class-method">+ renderList(snippets): void</text>
    <text x="20" y="196" class="class-method">+ loadSnippet(snippet): void</text>
    <text x="20" y="218" class="class-method">+ handleSubmit(formData): Promise</text>
    <text x="20" y="240" class="class-method">+ handleDelete(id): Promise</text>
    <text x="20" y="262" class="class-method">+ setMsg(text, type): void</text>
  </g>

  <!-- Backend Section -->
  <text x="100" y="500" class="section-header">Backend Layer (Vercel Serverless)</text>

  <!-- SnippetStore Class -->
  <g transform="translate(80, 520)">
    <rect class="class-box" width="380" height="240"/>
    <text x="190" y="32" text-anchor="middle" class="class-name">SnippetStore</text>
    <line x1="10" y1="45" x2="370" y2="45" class="class-divider"/>
    <text x="20" y="70" class="class-attr">- filePath: string</text>
    <text x="20" y="92" class="class-attr">- githubToken: string</text>
    <text x="20" y="114" class="class-attr">- githubRepo: string</text>
    <line x1="10" y1="128" x2="370" y2="128" class="class-divider"/>
    <text x="20" y="152" class="class-method">+ read(): Promise&lt;Snippet[]&gt;</text>
    <text x="20" y="174" class="class-method">+ add(snippet): Promise&lt;Snippet&gt;</text>
    <text x="20" y="196" class="class-method">+ update(id, data): Promise&lt;Snippet&gt;</text>
    <text x="20" y="218" class="class-method">+ delete(id): Promise&lt;boolean&gt;</text>
  </g>

  <!-- AuthHelper Class -->
  <g transform="translate(540, 520)">
    <rect class="class-box" width="300" height="180"/>
    <text x="150" y="32" text-anchor="middle" class="class-name">AuthHelper</text>
    <line x1="10" y1="45" x2="290" y2="45" class="class-divider"/>
    <text x="20" y="70" class="class-attr">- JWT_SECRET: string</text>
    <text x="20" y="92" class="class-attr">- ADMIN_USER: string</text>
    <line x1="10" y1="106" x2="290" y2="106" class="class-divider"/>
    <text x="20" y="130" class="class-method">+ verify(req): boolean</text>
    <text x="20" y="152" class="class-method">+ parseToken(header): object</text>
  </g>

  <!-- API Endpoints Class -->
  <g transform="translate(920, 520)">
    <rect class="class-box" width="400" height="220"/>
    <text x="200" y="32" text-anchor="middle" class="class-name">API Endpoints</text>
    <line x1="10" y1="45" x2="390" y2="45" class="class-divider"/>
    <text x="20" y="70" class="class-method">POST /api/addSnippet</text>
    <text x="20" y="92" class="class-method">PUT /api/updateSnippet</text>
    <text x="20" y="114" class="class-method">DELETE /api/deleteSnippet</text>
    <text x="20" y="136" class="class-method">POST /api/admin/login</text>
    <line x1="10" y1="150" x2="390" y2="150" class="class-divider"/>
    <text x="20" y="174" class="class-attr">Each endpoint:</text>
    <text x="20" y="196" class="class-attr">• Validates authentication (JWT)</text>
    <text x="20" y="218" class="class-attr">• Calls SnippetStore methods</text>
  </g>

  <!-- Relationships -->
  <!-- SnippetManager uses Snippet -->
  <path class="connector" d="M 400 270 L 480 270"/>
  <text x="440" y="260" class="connector-label">creates</text>

  <!-- AdminDashboard to SnippetManager -->
  <path class="connector" d="M 940 290 L 860 290"/>
  <text x="880" y="280" class="connector-label">renders UI like</text>

  <!-- AdminDashboard calls API -->
  <path class="connector" d="M 1130 430 L 1130 520"/>
  <text x="1140" y="475" class="connector-label">HTTP requests</text>

  <!-- API uses SnippetStore -->
  <path class="connector" d="M 920 630 L 460 630"/>
  <text x="660" y="620" class="connector-label">CRUD operations</text>

  <!-- API uses AuthHelper -->
  <path class="connector" d="M 920 620 L 840 620"/>
  <text x="850" y="610" class="connector-label">verifies JWT</text>

  <!-- SnippetManager fetches from API -->
  <path class="connector" d="M 670 410 L 670 470 L 1050 470 L 1050 520"/>
  <text x="760" y="460" class="connector-label">fetches snippets</text>
</svg>
